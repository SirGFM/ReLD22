#include <cstdio>

#include <core/game.h>
#include <game/assets/data.h>
#include <game/colorcamera.h>
#include <game/gamestate.h>
#include <game/menuscene.h>

#include <SDL/SDL.h>
#include <core/keyboard.h>

int main(int argc, char *argv[]) {
	//CppOGL::Game::openConsole();
	
	fprintf(stdout, "Loneliness+ is starting...\n");
	unsigned char mask[] = {
0x00, 0x00, 0x00, 0x3c,
0x00, 0x00, 0x00, 0x7e,
0x00, 0x00, 0x00, 0xff,
0x00, 0x06, 0x0c, 0xff,
0x00, 0x07, 0x0e, 0xff,
0x00, 0x07, 0x8f, 0xff,
0x00, 0x07, 0xff, 0xfe,
0x00, 0x07, 0xff, 0xfc,

0x18, 0x37, 0xff, 0xc0,
0x1c, 0x3f, 0xff, 0xe0,
0x1e, 0x3f, 0xff, 0xe0,
0x1f, 0xff, 0xff, 0xe0,
0x1f, 0xff, 0xff, 0xe0,
0x1f, 0xff, 0xff, 0xc0,
0x1f, 0xff, 0xff, 0xc0,
0x1f, 0xff, 0xff, 0x80,

0x1f, 0xff, 0xff, 0x00,
0x1f, 0xff, 0xfc, 0x00,
0x1f, 0xff, 0xfe, 0x00,
0x1f, 0xff, 0xfe, 0x00,
0x0f, 0xff, 0xfe, 0x00,
0x07, 0xff, 0xfe, 0x00,
0x00, 0x7f, 0xfc, 0x00,
0x00, 0x7f, 0xfc, 0x00,

0x3c, 0x3f, 0xf8, 0x3c,
0x7e, 0x1f, 0xf0, 0x7e,
0xff, 0x00, 0x00, 0xff,
0xff, 0x00, 0x00, 0xff,
0xff, 0x00, 0x00, 0xff,
0xff, 0x00, 0x00, 0xff,
0x7e, 0x00, 0x00, 0x7e,
0x3c, 0x00, 0x00, 0x3c
};
	if (!CppOGL::Game::init("Loneliness+", "data/icon.bmp", mask, 250, 250, 2, 30)) {
		printf("Exiting...\n");
		CppOGL::Game::clear();
		return 1;
	}
	if (!Data::init()) {
		printf("Exiting...\n");
		CppOGL::Game::clear();
		return 1;
	}
	delete CppOGL::Game::camera;
	CppOGL::Game::camera = new ColorCamera(0, 0, 250, 250, 2, 2);
	printf("Starting main loop...\n");
	if (!CppOGL::Game::run(new Menuscene())) {
		printf("Exiting...\n");
		CppOGL::Game::clear();
		return 1;
	}
	Data::clear();
	CppOGL::Game::clear();
	printf("Loneliness+ is exiting...\n");
	return 0;
}
